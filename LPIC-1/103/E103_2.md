# 103.2 Exercises

Both guided and exploration exercises for 103.2. 

## Guided Exercises

1. Using grep the command to see the number of processors on your system is the following:
```
$ grep processor /proc/cpuinfo
processor	: 0
processor	: 1
processor	: 2
processor	: 3
processor	: 4
processor	: 5
processor	: 6
processor	: 7
```

It works similarly with the `sed` command:
```
$ sed -n /processor/p < /proc/cpuinfo
processor	: 0
processor	: 1
processor	: 2
processor	: 3
processor	: 4
processor	: 5
processor	: 6
processor	: 7
```

To both of those commands you can pipe the result into `wc -l` to count the number of files `grep` or `sed` returns.

2. The users that have acces to a Bash shell are:
```
$ grep /bin/bash < /etc/passwd
root:x:0:0:root:/root:/bin/bash
lukas:x:1000:1000:lukas:/home/lukas:/bin/bash
```

Or:
```
$ sed -n /bash/p < /etc/passwd
root:x:0:0:root:/root:/bin/bash
lukas:x:1000:1000:lukas:/home/lukas:/bin/bash
```

The amount of systems that handle a task but cannot access to a shell is:
```
$ grep -vc bash < /etc/passwd
54
```

The amount of users and groups on my system are:

Users:
```
$ cut -d: -f3 /etc/passwd | sort -u | wc -l
56
```

Groups:
```
$ cut -d: -f4 /etc/passwd | sort -u | wc -l
47
```

```
$ sed -n -e '1'p -e '10'p -e '$'p /etc/passwd
root:x:0:0:root:/root:/bin/bash
news:x:9:9:news:/var/spool/news:/usr/sbin/nologin
libvirt-dnsmasq:x:126:131:Libvirt Dnsmasq,,,:/var/lib/libvirt/dnsmasq:/usr/sbin/nologin
```

3. To list all the users in with the GID 1000 you use the sed command:
```
$ sed -n /:1000:[A-Z]/p mypasswd 
dave:x:1001:1000:Dave Edwards,Finance,,,Main Office:/home/dave:/bin/ksh
emma:x:1002:1000:Emma Jones,Finance,,,Main Office:/home/emma:/bin/bash
frank:x:1003:1000:Frank Cassidy,Finance,,,Main Office:/home/frank:/bin/bash
grace:x:1004:1000:Grace Kearns,Engineering,,,Main Office:/home/grace:/bin/ksh
henry:x:1005:1000:Henry Adams,Sales,,,Main Office:/home/henry:/bin/bash
john:x:1006:1000:John Chapel,Sales,,,Main Office:/home/john:/bin/bash
```

Listing all the full names of the users for this group:
```
$ sed -n /:1000:[A-Z]/p mypasswd | cut -d: -f5
Dave Edwards,Finance,,,Main Office
Emma Jones,Finance,,,Main Office
Frank Cassidy,Finance,,,Main Office
Grace Kearns,Engineering,,,Main Office
Henry Adams,Sales,,,Main Office
John Chapel,Sales,,,Main Office
```

## Exploration Exercises

1. To get a raffle winner we can string together the command:
```
$ sed -n /'Main Office'/p mypasswd | cut -d: -f5 | cut -d, -f1 | sort -R | head -1
Henry Adams
```

2. To get how many people work in Finance, Engineering, and Sales run the command:
```
$ sed -n /'Main Office'/p mypasswd | cut -d: -f5 | cut -d, -f2 | uniq -c
      4 Finance
      1 Engineering
      2 Sales
```

3. We want to create a csv file with the order `First Name,Last Name,Position`.
```
$ sed -n /'Main Office'/p mypasswd | cut -d: -f5 | cut -d, -f1,2 | tr " " , > names.csv
```

4. To confirm that names.csv was not tampered with we can create a checksum.
```
$ md5sum names.csv
3ffdc2982f8515c5aecaa01857d29a40  names.csv
```

